generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Rol {
  idRol Int @id
  nombre String

  // One to many relation with usuario
  usuario Usuario[]
}

model Usuario {
  IdUsuario Int @id
  AvatarURI String

  // Many to one relation with rol
  rol Rol @relation(fields: [idRol], references: [idRol])
  idRol Int

  usuario String
  correo String @unique
  contrasena String

  // One to one relation with Paciente
  paciente Paciente?

  // One to one relation with Medico
  medico Medico?
}

model Departamento {
  idDepartamento Int @id

  // Many to one relation with Municipio
  municipio Municipio[]

  nombre String
}

model Municipio {
  idMunicipio Int @id

  // Many to one relation with Departamento
  departamento Departamento @relation(fields: [idDepartamento], references: [idDepartamento])
  idDepartamento Int

  // Many to one relation with Paciente
  paciente Paciente[]

  nombre String
}

model Paciente {
  idPaciente Int @id

  // One to one relation with usuario
  usuario Usuario @relation(fields: [idUsuario], references: [IdUsuario])
  idUsuario Int @unique

  // Many to one relation with Municipio
  municipio Municipio @relation(fields: [idMunicipio], references: [idMunicipio])
  idMunicipio Int

  // Many to one relation with Citas
  cita Cita[]

  // Many to one relation with Consulta
  consulta Consulta[]

  // Many to one relation with Tratamiento
  tratamiento Tratamiento[]

  // Many to one relation with SignoVital
  pacienteSignoVital PacienteSignoVital[]

  // One to one relation with Expediente
  expediente Expediente?

  // Many to one relation with Vacunacion
  vacunacion Vacunacion[]

  // Many to one relation with OrdenExamen
  ordenExamen OrdenExamen[]

  cedula String
  nombres String
  apellidos String
  direccion String
  numeroInss String
  profesion String
  fechaNacimiento DateTime
  lugarNacimiento String
  sexo String
  telefono String
  nombrePadre String
  nombreMadre String
  tipoSangre String
}

model UnidadSalud {
  idUnidadSalud Int @id
  nombre String

  // Many to one relation with Cita
  cita Cita[]

  // Many to one relation with Vacunas
  vacunacion Vacunacion[]

  // Many to one relation with Consulta
  consulta Consulta[]
}

model Cita {
  idCita Int @id

  // Many to one relation with Paciente
  paciente   Paciente @relation(fields: [idPaciente], references: [idPaciente])
  idPaciente Int

  // Many to one relation with UnidadSalud
  unidadSalud UnidadSalud @relation(fields: [idUnidadSalud], references: [idUnidadSalud])
  idUnidadSalud Int

  fecha DateTime
  hora DateTime
}

model SignoVital {
  idSignoVital Int @id
  fecha DateTime
  hora DateTime
  pulso Float
  temperatura Float
  presionArterial Float
  frecuenciaCardiaca Float
  orina String
  liquidos String
  peso Float
  respiracion String

  // One to one relation with PacienteSignoVital
  pacienteSignoVital PacienteSignoVital?
}

model PacienteSignoVital {
  idPacienteSignoVital Int @id

  // Many to one relation with Paciente
  paciente Paciente @relation(fields: [idPaciente], references: [idPaciente])
  idPaciente Int

  // One to one relation with SignoVital
  signoVital SignoVital @relation(fields: [idSignoVital], references: [idSignoVital])
  idSignoVital Int @unique

  // One to one relation with ConsultaSignoVital
  consultaSignoVital ConsultaSignoVital?
}

model Expediente {
  idExpediente Int @id

  // One to one relation with Paciente
  paciente Paciente @relation(fields: [idPaciente], references: [idPaciente])
  idPaciente Int @unique

  // Many to one relation with Emergencia
  emergencia Emergencia[]

  // Many to one relation with HistorialClinico
  historialClinico HistorialClinico[]

  // Many to one relation with Consulta
  consulta Consulta[]

  numeroExpediente String
  fechaCreacion DateTime
  fechaModificacion DateTime
}

model Emergencia {
  idEmergencia Int @id
  vehiculoMotorizado Boolean
  otroTransporte Boolean
  caida Boolean
  maquinaria Boolean
  efectosTardios Boolean
  fenomenoNatural Boolean
  asaltOAgresion Boolean
  intentoSuicidio Boolean
  incendioExplosion Boolean
  otro Boolean

  //Lugar
  trabajo Boolean
  vivienda Boolean
  centroEstudio Boolean
  centroMedico Boolean
  viaPublica Boolean
  deporteDive Boolean
  otroLugar Boolean

  fecha DateTime
  hora DateTime
  resumenClinico String
  examenFisico String
  diagnostico String
  planes String

  fallecido Boolean
  abandono Boolean
  alta Boolean

  // Many to one relation with Expediente
  expediente Expediente @relation(fields: [idExpediente], references: [idExpediente])
  idExpediente Int
}

model TipoEnfermedad {
  idTipoEnfermedad Int @id
  tipoEnfermedad String

  // One to many relation with Enfermedad
  enfermedad Enfermedad[]
}

model Enfermedad {
  idEnfermedad Int @id

  // Many to one relation with TipoEnfermedad
  tipoEnfermedad TipoEnfermedad @relation(fields: [idTipoEnfermedad], references: [idTipoEnfermedad])
  idTipoEnfermedad Int

  // Many to one relation with HistorialClinicoEnfermedad
  historialClinicoEnfermedad HistorialClinicoEnfermedad[]

  nombre String
}

model Vacunacion {
  idVacunacion Int @id

  // One to many relation with Paciente
  paciente Paciente @relation(fields: [idPaciente], references: [idPaciente])
  idPaciente Int

  // One to many relation with UnidadSalud
  unidadSalud UnidadSalud @relation(fields: [idUnidadSalud], references: [idUnidadSalud])
  idUnidadSalud Int

  nombreVacuna String
  fechaVacunacion DateTime
  fechaProximaVacunacion DateTime
}

model HistorialClinico {
  idHistorialClinico Int @id

  // Many to one relation with Expediente
  expediente   Expediente @relation(fields: [idExpediente], references: [idExpediente])
  idExpediente Int

  motivoConsulta  String
  horasSueno      Int
  actividadFisica String
  alimentacion    String

  tabaco                                String
  drogas                                String
  farmacos                              String
  historiaEnfermedadActual              String
  enfermedadesInfectoContagiosasPrevias String
  enfermedadesCronicas                  String
  cirugiasPreviasRealizadas             String
  hospitalizaciones                     String
  aspectoGeneral                        String
  pielYMucosas                          String
  cabezaYCuello                         String
  torax                                 String

  // One to one relation with HistorialClinicoEnfermedad
  historialClinicoEnfermedad HistorialClinicoEnfermedad?
}

model HistorialClinicoEnfermedad {
  idHistorialClinicoEnfermedad Int @id

  // One to one relation with HistorialClinico
  historialClinico HistorialClinico @relation(fields: [idHistorialClinico], references: [idHistorialClinico])
  idHistorialClinico Int @unique

  // Many to many relation with Enfermedad
  enfermedad Enfermedad[]
}

model Especialidad {
  idEspecialidad Int @id
  nombre String

  // Many to one relation with Medico
  medico Medico[]
}

model Medico {
  idMedico Int @id

  // One to one relation with usuario
  usuario Usuario @relation(fields: [idUsuario], references: [IdUsuario])
  idUsuario Int @unique

  // Many to one relation with Consulta
  consulta Consulta[]

  // Many to one relation with Especialidad
  especialidad Especialidad @relation(fields: [idEspecialidad], references: [idEspecialidad])
  idEspecialidad Int
}

model Consulta {
  idConsulta Int @id

  // Many to one relation with Medico
  medico Medico @relation(fields: [idMedico], references: [idMedico])
  idMedico Int

  // Many to one relation with Paciente
  paciente Paciente @relation(fields: [idPaciente], references: [idPaciente])
  idPaciente Int

  // Many to one relation with Expediente
  expediente Expediente @relation(fields: [idExpediente], references: [idExpediente])
  idExpediente Int

  // Many to one relation with Unidad Salud
  unidadSalud UnidadSalud @relation(fields: [idUnidadSalud], references: [idUnidadSalud])
  idUnidadSalud Int

  // One to one relation with ConsultaSignoVital
  consultaSignoVital ConsultaSignoVital?

  fecha DateTime
  evaluacion String
  planes String
}

model ConsultaSignoVital {
  idConsultaSignoVital Int @id

  // One to one relation with Consulta
  consulta Consulta @relation(fields: [idConsulta], references: [idConsulta])
  idConsulta Int @unique

  // One to one relation with PacienteSignoVital
  pacienteSignoVital PacienteSignoVital @relation(fields: [idPacienteSignoVital], references: [idPacienteSignoVital])
  idPacienteSignoVital Int @unique
}

model Examen {
  idExamen Int @id
  nombre String

  // One to many relation with OrdenExamen
  ordenExamen OrdenExamen[]
}

model OrdenExamen {
  idOrdenExamen Int @id

  //One to many relation with Paciente
  paciente Paciente @relation(fields: [idPaciente], references: [idPaciente])
  idPaciente Int

  // One to many relation with Examen
  examen Examen @relation(fields: [idExamen], references: [idExamen])
  idExamen Int

  resultado String
}


model Tratamiento {
  idTratamiento Int @id

  // Many to one relation with Paciente
  paciente Paciente @relation(fields: [idPaciente], references: [idPaciente])
  idPaciente Int

  nombre String
  unidadTratamiento String
  dosis String
  fechaInicio DateTime
  fechaFin DateTime
  frecuencia String
}